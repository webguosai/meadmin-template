import{_ as A}from"./index-lV_ixfDb.js";import{g as D,A as T,d as H,e as I}from"./add-wRwdWiut.js";import{bu as K,ai as O,bv as U,_ as j}from"./index-yH0Ry0aD.js";import{f as w}from"./index-T5KmWP1B.js";import{E as R}from"./index-MghL-wS_.js";import{o as z}from"./omit-VLrBXF-t.js";import{E as Q}from"./index-yGiInI68.js";import{d as b,r as d,y as F,i as r,o as C,c as J,k as n,w as a,a as c,j as k,_ as P,$ as W,B as i,O as y,s as X}from"./core-ST-i4T9p.js";import"./pagination-sRyW0GdJ.js";import"./elIcon-sXDKzXmT.js";import"./index-L9fZwOev.js";import"./event-vOXeFsAk.js";import"./index-sftZIlHI.js";import"./vue.runtime.esm-bundler-HQOW8PNi.js";import"./mock-iVyY1y2-.js";import"./index-94vktnnO.js";import"./index-1biW9QUL.js";import"./flatten-h9WQF0ki.js";import"./identity-Cx94HuMG.js";import"./index-bdn5t8Of.js";import"./index-pVHqEiMP.js";import"./dropdown-Qa4E4y1i.js";import"./index-e0v0gqzN.js";import"./strings-tW-KZ-C8.js";import"./index-E1Vaaaoc.js";import"./castArray-IgVPsfCg.js";import"./index-QoQCtQxX.js";import"./index-FnUpZ9Gc.js";import"./index-hw4zphJd.js";import"./scroll-8BrWMcLm.js";import"./refs-J1jeHUpR.js";import"./isPlainObject-5qL80Wr3.js";import"./validator-Bzbif_xy.js";const Y={class:"group"},Z={class:"group-item"},ee=["innerHTML"],te={class:"group-item-btn"},oe=b({setup:!0,name:"Group",getComponents:()=>[w,r("mel-icon-edit"),R,r("mel-icon-delete"),r("vxe-column"),A,T]}),ne=b({...oe,__name:"group",emits:["currentChange"],setup(re,{expose:E,emit:G}){const _=G,l=d(!1),u=d(),s=D();let f=[];const m=d(""),g=e=>{s.data.value=K(e,["name"],f),X(()=>u.value.vxeTableRef.setAllTreeExpand(!0))},p=async()=>{await s.runAsync(),f=O(s.data.value),_("currentChange",[]),g(u.value.searchText)};p();const B=({row:e})=>_("currentChange",e.rules),v=F(),h=e=>{v.value=e?z(e,["children"]):void 0,l.value=!0},$=e=>{Q.confirm("确认删除所选角色组?").then(()=>{H().runAsync(e).then(p)}).catch(()=>{})};return E({setGroupRules:async e=>{if(!e)return!1;const t=u.value.vxeTableRef.getCurrentRecord();if(t)return await I().runAsync(t.id,{rules:e}),t.rules=e,!0;U.error("请先选择分组")}}),(e,t)=>{const L=w,M=r("mel-icon-edit"),x=R,N=r("mel-icon-delete"),V=r("vxe-column"),q=A;return C(),J("div",Y,[n(q,{ref_key:"groupRef",ref:u,"quick-search":i(m),"onUpdate:quickSearch":t[0]||(t[0]=o=>y(m)?m.value=o:null),data:i(s).data.value??[],loading:i(s).loading.value,"row-config":{isCurrent:!0,useKey:!0},"tree-config":{expandAll:!0,line:!0},"column-config":{useKey:!0},"custom-column":!1,print:!1,"export-menu":[],"show-overflow":"",height:"auto","me-class":"table-group",onCurrentChange:B,onAdd:t[1]||(t[1]=o=>h()),onRefresh:p,onQuickSearch:g},{default:a(()=>[n(V,{field:"name",title:"角色","tree-node":""},{default:a(({row:o})=>[c("div",Z,[c("div",null,[c("span",{innerHTML:o.name},null,8,ee),k("  "),o.status===0?(C(),P(L,{key:0,size:"small",type:"info"},{default:a(()=>[k("禁用")]),_:1})):W("",!0)]),c("div",te,[n(x,{type:"primary",underline:!1,onClick:S=>h(o)},{default:a(()=>[n(M)]),_:2},1032,["onClick"]),n(x,{type:"danger",underline:!1,style:{"margin-left":"5px"},onClick:S=>$(o.id)},{default:a(()=>[n(N)]),_:2},1032,["onClick"])])])]),_:1})]),_:1},8,["quick-search","data","loading"]),n(T,{show:i(l),"onUpdate:show":t[2]||(t[2]=o=>y(l)?l.value=o:null),data:i(v),onSuccess:t[3]||(t[3]=o=>p())},null,8,["show","data"])])}}}),He=j(ne,[["__scopeId","data-v-6579e67b"]]);export{He as default};
