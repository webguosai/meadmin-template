import{aC as u,a7 as m,_ as j}from"./index-yH0Ry0aD.js";import"./mock-iVyY1y2-.js";import{E as y}from"./index-e0v0gqzN.js";import{a as I,E as A}from"./index-E1Vaaaoc.js";import{E as k}from"./index-L9fZwOev.js";import{b as C,E as T}from"./index-QoQCtQxX.js";import{E as S}from"./index-sftZIlHI.js";import{E as x}from"./index-FnUpZ9Gc.js";import{d as B,r as w,a6 as F,x as V,C as N,o as z,_ as K,w as a,B as l,k as t,j as p}from"./core-ST-i4T9p.js";class h{constructor(){u(this,"id",void 0),u(this,"parentId",void 0),u(this,"name",""),u(this,"rules",[]),u(this,"status",1)}}function M(){return m(s=>({url:"admin/group/add",method:"POST",data:s}),{success:!0})}function $(){return m((s,c)=>({url:"admin/group/{id}".replace("{id}",s+""),method:"POST",data:c}),{success:!0})}function se(){return m(s=>({url:"admin/group/{id}".replace("{id}",s+""),method:"DELETE"}),{success:!0})}function H(){return m(()=>({url:"admin/group/index",method:"get"}),{noLoading:!0,cacheKey:"groupList",cacheTime:5*60*1e3})}const J=B({setup:!0,name:"Add",getComponents:()=>[y,I,k,C,T,S,A,x]}),Q=B({...J,__name:"add",props:{show:{type:Boolean},data:{}},emits:["update:show","success"],setup(s,{emit:c}){const n=s,f=c,_=w(),e=w(new h),D=F({parentId:[{required:!0,message:"父级必须选择",trigger:"blur"}],name:[{required:!0,message:"名称必须填写",trigger:"blur"}],status:[{required:!0,message:"状态必须选择",trigger:"blur"}]}),v=()=>{n.data?e.value={...n.data}:e.value=new h};V(()=>n.data,v);const g=H();g.run();const G=N(()=>g.data.value?[{id:0,name:"无",parentId:0,children:[],rules:[],status:0},...g.data.value]:[]);V(()=>n.show,d=>{!d&&_.value.clearValidate()});const q=async()=>{await _.value.validate()&&(e.value.id?await $().runAsync(e.value.id,e.value):await M().runAsync(e.value),f("success"),f("update:show",!1))};return(d,o)=>{const L=y,i=I,O=k,b=C,P=T,E=S,R=A,U=x;return z(),K(U,{"model-value":d.show,title:d.data?"编辑":"新增","onUpdate:modelValue":o[4]||(o[4]=r=>f("update:show",r))},{default:a(()=>[t(R,{ref_key:"formRef",ref:_,model:l(e),rules:l(D)},{default:a(()=>[t(i,{label:"父级",prop:"parentId"},{default:a(()=>[t(L,{modelValue:l(e).parentId,"onUpdate:modelValue":o[0]||(o[0]=r=>l(e).parentId=r),disabled:d.data!==void 0,props:{label:"name",value:"id",disabled:({id:r})=>r<=0},data:l(G),"render-after-expand":!1,filterable:"","check-strictly":""},null,8,["modelValue","disabled","props","data"])]),_:1}),t(i,{label:"名称",prop:"name"},{default:a(()=>[t(O,{modelValue:l(e).name,"onUpdate:modelValue":o[1]||(o[1]=r=>l(e).name=r)},null,8,["modelValue"])]),_:1}),t(i,{label:"状态",prop:"status"},{default:a(()=>[t(P,{modelValue:l(e).status,"onUpdate:modelValue":o[2]||(o[2]=r=>l(e).status=r)},{default:a(()=>[t(b,{label:1},{default:a(()=>[p("启用")]),_:1}),t(b,{label:0},{default:a(()=>[p("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(i,null,{default:a(()=>[t(E,{type:"primary",onClick:q},{default:a(()=>[p("提交")]),_:1}),t(E,{onClick:o[3]||(o[3]=r=>v())},{default:a(()=>[p("重置")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value","title"])}}}),W=j(Q,[["__scopeId","data-v-e51e8b4a"]]),de=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as A,de as a,se as d,$ as e,H as g};
