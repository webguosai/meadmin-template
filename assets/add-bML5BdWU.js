import{aC as s,a7 as c,_ as Q}from"./index-yH0Ry0aD.js";import"./mock-iVyY1y2-.js";import{E as x}from"./index-e0v0gqzN.js";import{a as B,E as D}from"./index-E1Vaaaoc.js";import{E as L}from"./index-L9fZwOev.js";import{E as M}from"./index-CwdKmFto.js";import{b as F,E as O}from"./index-QoQCtQxX.js";import{E as P}from"./index-sftZIlHI.js";import{E as R}from"./index-FnUpZ9Gc.js";import{d as j,r as h,a6 as W,x as C,C as X,o as m,_ as v,w as r,B as a,k as o,K as S,t as T,j as f,au as U,c as k}from"./core-ST-i4T9p.js";class q{constructor(){s(this,"id",void 0),s(this,"parentId",void 0),s(this,"name",""),s(this,"rule",""),s(this,"sort",0),s(this,"status",1),s(this,"type",1)}}function Y(){return c(u=>({url:"admin/menu/add",method:"POST",data:u}),{success:!0})}function Z(){return c((u,_)=>({url:"admin/menu/{id}".replace("{id}",u+""),method:"POST",data:_}),{success:!0})}function be(){return c(u=>({url:"admin/menu/{id}".replace("{id}",u+""),method:"DELETE"}),{success:!0})}function ee(){return c(()=>({url:"menu/index",method:"get"}),{noLoading:!0,cacheKey:"menuList",cacheTime:5*60*1e3})}const te={1:"菜单",2:"页面",3:"按钮"},ae={0:"关闭",1:"开启"},le=j({setup:!0,name:"Add",getComponents:()=>[x,B,L,M,F,O,P,D,R]}),oe=j({...le,__name:"add",props:{show:{type:Boolean},data:{}},emits:["update:show","success"],setup(u,{emit:_}){const i=u,b=_,g=h(),e=h(new q),N=W({parentId:[{required:!0,message:"父级必须选择",trigger:"blur"}],name:[{required:!0,message:"名称必须填写",trigger:"blur"}],rule:[{required:!0,message:"规则必须填写",trigger:"blur"}],type:[{required:!0,message:"类型必须选择",trigger:"blur"}],status:[{required:!0,message:"状态必须选择",trigger:"blur"}]}),E=()=>{i.data?e.value={...i.data}:e.value=new q};C(()=>i.data,E);const V=ee();V.run();const K=X(()=>V.data.value?[{id:0,name:"无",parentId:0,children:[],status:1},...V.data.value]:[]);C(()=>i.show,p=>{!p&&g.value.clearValidate()});const z=async()=>{await g.value.validate()&&(e.value.id?await Z().runAsync(e.value.id,e.value):await Y().runAsync(e.value),b("success"),b("update:show",!1))};return(p,l)=>{const G=x,n=B,y=L,$=M,w=F,I=O,A=P,H=D,J=R;return m(),v(J,{"model-value":p.show,title:p.data?"编辑":"新增","onUpdate:modelValue":l[7]||(l[7]=t=>b("update:show",t))},{default:r(()=>[o(H,{ref_key:"formRef",ref:g,model:a(e),rules:a(N)},{default:r(()=>[o(n,{label:"父级",prop:"parentId"},{default:r(()=>[o(G,{modelValue:a(e).parentId,"onUpdate:modelValue":l[0]||(l[0]=t=>a(e).parentId=t),props:{label:"name",value:"id"},data:a(K),"render-after-expand":!1,filterable:"","check-strictly":""},null,8,["modelValue","data"])]),_:1}),o(n,{label:"名称",prop:"name"},{default:r(()=>[o(y,{modelValue:a(e).name,"onUpdate:modelValue":l[1]||(l[1]=t=>a(e).name=t)},null,8,["modelValue"])]),_:1}),o(n,{label:"规则",prop:"rule"},{default:r(()=>[o(y,{modelValue:a(e).rule,"onUpdate:modelValue":l[2]||(l[2]=t=>a(e).rule=t)},null,8,["modelValue"])]),_:1}),o(n,{label:"排序",prop:"sort"},{default:r(()=>[o($,{modelValue:a(e).sort,"onUpdate:modelValue":l[3]||(l[3]=t=>a(e).sort=t)},null,8,["modelValue"])]),_:1}),o(n,{label:"类型",prop:"type"},{default:r(()=>[o(I,{modelValue:a(e).type,"onUpdate:modelValue":l[4]||(l[4]=t=>a(e).type=t)},{default:r(()=>[(m(!0),k(S,null,U(a(te),(t,d)=>(m(),v(w,{key:d,label:+d},{default:r(()=>[f(T(t),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"状态",prop:"status"},{default:r(()=>[o(I,{modelValue:a(e).status,"onUpdate:modelValue":l[5]||(l[5]=t=>a(e).status=t)},{default:r(()=>[(m(!0),k(S,null,U(a(ae),(t,d)=>(m(),v(w,{key:d,label:+d},{default:r(()=>[f(T(t),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,null,{default:r(()=>[o(A,{type:"primary",onClick:z},{default:r(()=>[f("提交")]),_:1}),o(A,{onClick:l[6]||(l[6]=t=>E())},{default:r(()=>[f("重置")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value","title"])}}}),re=Q(oe,[["__scopeId","data-v-777b7dce"]]),ge=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"}));export{re as A,ge as a,be as d,ee as m,ae as s,te as t};
