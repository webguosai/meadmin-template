import{k as S,C as E,Y as z,B as T,aF as x,aG as I,aH as D,aI as $,w as A,A as k,V as f}from"./index-9aGlfxYy.js";import{q as _,z as F,Q as U,O as V,aL as j,x as q,v as G,N as p,d as K,k as Q,T as L,a7 as J}from"./core-pFF3Oy_E.js";let r;const Z=e=>{var o;if(!S)return 0;if(r!==void 0)return r;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const a=t.offsetWidth;t.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",t.appendChild(s);const l=s.offsetWidth;return(o=t.parentNode)==null||o.removeChild(t),r=a-l,r},le=(e,o,t)=>{let a={offsetX:0,offsetY:0};const s=c=>{const d=c.clientX,m=c.clientY,{offsetX:u,offsetY:v}=a,i=e.value.getBoundingClientRect(),h=i.left,y=i.top,Y=i.width,O=i.height,W=document.documentElement.clientWidth,B=document.documentElement.clientHeight,H=-h+u,N=-y+v,P=W-h-Y+u,X=B-y-O+v,w=g=>{const C=Math.min(Math.max(u+g.clientX-d,H),P),M=Math.min(Math.max(v+g.clientY-m,N),X);a={offsetX:C,offsetY:M},e.value&&(e.value.style.transform=`translate(${E(C)}, ${E(M)})`)},b=()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",w),document.addEventListener("mouseup",b)},l=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",s)},n=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",s)};_(()=>{F(()=>{t.value?l():n()})}),U(()=>{n()})},ce=(e,o={})=>{V(e)||z("[useLockscreen]","You need to pass a ref param to this function");const t=o.ns||T("popup"),a=j(()=>t.bm("parent","hidden"));if(!S||x(document.body,a.value))return;let s=0,l=!1,n="0";const c=()=>{setTimeout(()=>{$(document==null?void 0:document.body,a.value),l&&document&&(document.body.style.width=n)},200)};q(e,d=>{if(!d){c();return}l=!x(document.body,a.value),l&&(n=document.body.style.width),s=Z(t.namespace.value);const m=document.documentElement.clientHeight<document.body.scrollHeight,u=I(document.body,"overflowY");s>0&&(m||u==="scroll")&&l&&(document.body.style.width=`calc(100% - ${s}px)`),D(document.body,a.value)}),G(()=>c())},R=e=>{if(!e)return{onClick:p,onMousedown:p,onMouseup:p};let o=!1,t=!1;return{onClick:n=>{o&&t&&e(n),o=t=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{t=n.target===n.currentTarget}}},ee=A({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:k([String,Array,Object])},zIndex:{type:k([String,Number])}}),te={click:e=>e instanceof MouseEvent},oe="overlay";var ne=K({name:"ElOverlay",props:ee,emits:te,setup(e,{slots:o,emit:t}){const a=T(oe),s=d=>{t("click",d)},{onClick:l,onMousedown:n,onMouseup:c}=R(e.customMaskEvent?void 0:s);return()=>e.mask?Q("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:n,onMouseup:c},[L(o,"default")],f.STYLE|f.CLASS|f.PROPS,["onClick","onMouseup","onMousedown"]):J("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[L(o,"default")])}});const de=ne;export{de as E,ce as a,R as b,le as u};
