import{d as ue,a7 as Fa,M as Pe,C as g,i as Y,o as m,c as D,$ as U,_ as B,ad as ke,w as A,k as J,V as x,K as ne,a as he,r as P,au as ge,t as oe,j as Ha,n as Ba,P as Ye,N as za,S as Aa,a6 as Ge,x as se,aJ as Ka,q as pa,s as ce,aF as Oa,aK as qa,B as i,W as $e,ay as Ra,aL as Wa,X as me,O as Ua,a1 as _e,T as ja,E as Ae,F as Qe,m as Ke,D as ea,ac as Ve}from"./core-ST-i4T9p.js";import{h as pe,k as we,E as de,g as fa,am as Oe,a3 as Za,e as Re,f as ie,an as Xa,ai as va,N as ha,l as O,ao as Te,ap as ma,a1 as ga,a8 as Ja,P as Ya,ag as Ga,U as Qa,a0 as el,V as aa,W as al,aq as ll,m as la,ar as ta,i as sa,as as tl,at as sl,Z as na,w as nl}from"./index-yH0Ry0aD.js";import{E as ba}from"./index-bdn5t8Of.js";import{t as ya,l as ka,f as ol,a as il,e as rl,x as Se,y as ul}from"./elIcon-sXDKzXmT.js";import{E as cl}from"./index-1biW9QUL.js";import{b as dl}from"./index-QoQCtQxX.js";import{c as oa}from"./strings-tW-KZ-C8.js";import{i as Ce,t as pl,f as ia}from"./index-T5KmWP1B.js";import{U as re,C as Ne}from"./event-vOXeFsAk.js";import{f as ra,g as ua}from"./index-yrE5VKmZ.js";import{s as fl}from"./scroll-8BrWMcLm.js";import{b as vl}from"./flatten-h9WQF0ki.js";import{E as hl,i as ml}from"./index-L9fZwOev.js";import{c as gl,u as Ca,d as bl}from"./index-sftZIlHI.js";var yl=1/0;function kl(e){var t=e==null?0:e.length;return t?vl(e,yl):[]}const Cl=()=>Math.floor(Math.random()*1e4);var Nl=ue({name:"NodeContent",setup(){return{ns:pe("cascader-node")}},render(){const{ns:e}=this,{node:t,panel:s}=this.$parent,{data:a,label:r}=t,{renderLabelFn:v}=s;return Fa("span",{class:e.e("label")},v?v({node:t,data:a}):r)}});const We=Symbol(),wl=ue({name:"ElCascaderNode",components:{ElCheckbox:cl,ElRadio:dl,NodeContent:Nl,ElIcon:de,Check:ya,Loading:ka,ArrowRight:ol},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const s=Pe(We),a=pe("cascader-node"),r=g(()=>s.isHoverMenu),v=g(()=>s.config.multiple),p=g(()=>s.config.checkStrictly),k=g(()=>{var N;return(N=s.checkedNodes[0])==null?void 0:N.uid}),u=g(()=>e.node.isDisabled),w=g(()=>e.node.isLeaf),E=g(()=>p.value&&!w.value||!u.value),y=g(()=>_(s.expandingNode)),F=g(()=>p.value&&s.checkedNodes.some(_)),_=N=>{var L;const{level:z,uid:Q}=e.node;return((L=N==null?void 0:N.pathNodes[z-1])==null?void 0:L.uid)===Q},q=()=>{y.value||s.expandNode(e.node)},H=N=>{const{node:L}=e;N!==L.checked&&s.handleCheckChange(L,N)},I=()=>{s.lazyLoad(e.node,()=>{w.value||q()})},R=N=>{r.value&&(M(),!w.value&&t("expand",N))},M=()=>{const{node:N}=e;!E.value||N.loading||(N.loaded?q():I())},j=()=>{r.value&&!w.value||(w.value&&!u.value&&!p.value&&!v.value?W(!0):M())},K=N=>{p.value?(H(N),e.node.loaded&&q()):W(N)},W=N=>{e.node.loaded?(H(N),!p.value&&q()):I()};return{panel:s,isHoverMenu:r,multiple:v,checkStrictly:p,checkedNodeId:k,isDisabled:u,isLeaf:w,expandable:E,inExpandingPath:y,inCheckedPath:F,ns:a,handleHoverExpand:R,handleExpand:M,handleClick:j,handleCheck:W,handleSelectCheck:K}}}),El=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],Vl=he("span",null,null,-1);function Sl(e,t,s,a,r,v){const p=Y("el-checkbox"),k=Y("el-radio"),u=Y("check"),w=Y("el-icon"),E=Y("node-content"),y=Y("loading"),F=Y("arrow-right");return m(),D("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:x([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:t[2]||(t[2]=(..._)=>e.handleHoverExpand&&e.handleHoverExpand(..._)),onFocus:t[3]||(t[3]=(..._)=>e.handleHoverExpand&&e.handleHoverExpand(..._)),onClick:t[4]||(t[4]=(..._)=>e.handleClick&&e.handleClick(..._))},[U(" prefix "),e.multiple?(m(),B(p,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:t[0]||(t[0]=ke(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(m(),B(k,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:t[1]||(t[1]=ke(()=>{},["stop"]))},{default:A(()=>[U(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Vl]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(m(),B(w,{key:2,class:x(e.ns.e("prefix"))},{default:A(()=>[J(u)]),_:1},8,["class"])):U("v-if",!0),U(" content "),J(E),U(" postfix "),e.isLeaf?U("v-if",!0):(m(),D(ne,{key:3},[e.node.loading?(m(),B(w,{key:0,class:x([e.ns.is("loading"),e.ns.e("postfix")])},{default:A(()=>[J(y)]),_:1},8,["class"])):(m(),B(w,{key:1,class:x(["arrow-right",e.ns.e("postfix")])},{default:A(()=>[J(F)]),_:1},8,["class"]))],64))],42,El)}var $l=we(wl,[["render",Sl],["__file","node.vue"]]);const Tl=ue({name:"ElCascaderMenu",components:{Loading:ka,ElIcon:de,ElScrollbar:ba,ElCascaderNode:$l},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=Ba(),s=pe("cascader-menu"),{t:a}=fa(),r=Cl();let v=null,p=null;const k=Pe(We),u=P(null),w=g(()=>!e.nodes.length),E=g(()=>!k.initialLoaded),y=g(()=>`cascader-menu-${r}-${e.index}`),F=I=>{v=I.target},_=I=>{if(!(!k.isHoverMenu||!v||!u.value))if(v.contains(I.target)){q();const R=t.vnode.el,{left:M}=R.getBoundingClientRect(),{offsetWidth:j,offsetHeight:K}=R,W=I.clientX-M,N=v.offsetTop,L=N+v.offsetHeight;u.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${W} ${N} L${j} 0 V${N} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${W} ${L} L${j} ${K} V${L} Z" />
        `}else p||(p=window.setTimeout(H,k.config.hoverThreshold))},q=()=>{p&&(clearTimeout(p),p=null)},H=()=>{u.value&&(u.value.innerHTML="",q())};return{ns:s,panel:k,hoverZone:u,isEmpty:w,isLoading:E,menuId:y,t:a,handleExpand:F,handleMouseMove:_,clearHoverZone:H}}});function xl(e,t,s,a,r,v){const p=Y("el-cascader-node"),k=Y("loading"),u=Y("el-icon"),w=Y("el-scrollbar");return m(),B(w,{key:e.menuId,tag:"ul",role:"menu",class:x(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:A(()=>{var E;return[(m(!0),D(ne,null,ge(e.nodes,y=>(m(),B(p,{key:y.uid,node:y,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(m(),D("div",{key:0,class:x(e.ns.e("empty-text"))},[J(u,{size:"14",class:x(e.ns.is("loading"))},{default:A(()=>[J(k)]),_:1},8,["class"]),Ha(" "+oe(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(m(),D("div",{key:1,class:x(e.ns.e("empty-text"))},oe(e.t("el.cascader.noData")),3)):(E=e.panel)!=null&&E.isHoverMenu?(m(),D("svg",{key:2,ref:"hoverZone",class:x(e.ns.e("hover-zone"))},null,2)):U("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var Il=we(Tl,[["render",xl],["__file","menu.vue"]]);let Pl=0;const _l=e=>{const t=[e];let{parent:s}=e;for(;s;)t.unshift(s),s=s.parent;return t};class be{constructor(t,s,a,r=!1){this.data=t,this.config=s,this.parent=a,this.root=r,this.uid=Pl++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:v,label:p,children:k}=s,u=t[k],w=_l(this);this.level=r?0:a?a.level+1:1,this.value=t[v],this.label=t[p],this.pathNodes=w,this.pathValues=w.map(E=>E.value),this.pathLabels=w.map(E=>E.label),this.childrenData=u,this.children=(u||[]).map(E=>new be(E,s,this)),this.loaded=!s.lazy||this.isLeaf||!Oe(u)}get isDisabled(){const{data:t,parent:s,config:a}=this,{disabled:r,checkStrictly:v}=a;return(Ye(r)?r(t,this):!!t[r])||!v&&(s==null?void 0:s.isDisabled)}get isLeaf(){const{data:t,config:s,childrenData:a,loaded:r}=this,{lazy:v,leaf:p}=s,k=Ye(p)?p(t,this):t[p];return Za(k)?v&&!r?!1:!(Array.isArray(a)&&a.length):!!k}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:s,children:a}=this,r=new be(t,this.config,this);return Array.isArray(s)?s.push(t):this.childrenData=[t],a.push(r),r}calcText(t,s){const a=t?this.pathLabels.join(s):this.label;return this.text=a,a}broadcast(t,...s){const a=`onParent${oa(t)}`;this.children.forEach(r=>{r&&(r.broadcast(t,...s),r[a]&&r[a](...s))})}emit(t,...s){const{parent:a}=this,r=`onChild${oa(t)}`;a&&(a[r]&&a[r](...s),a.emit(t,...s))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,s=t.filter(r=>!r.isDisabled),a=s.length?s.every(r=>r.checked):!1;this.setCheckState(a)}setCheckState(t){const s=this.children.length,a=this.children.reduce((r,v)=>{const p=v.checked?1:v.indeterminate?.5:0;return r+p},0);this.checked=this.loaded&&this.children.filter(r=>!r.isDisabled).every(r=>r.loaded&&r.checked)&&t,this.indeterminate=this.loaded&&a!==s&&a>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:s,multiple:a}=this.config;s||!a?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const qe=(e,t)=>e.reduce((s,a)=>(a.isLeaf?s.push(a):(!t&&s.push(a),s=s.concat(qe(a.children,t))),s),[]);class ca{constructor(t,s){this.config=s;const a=(t||[]).map(r=>new be(r,this.config));this.nodes=a,this.allNodes=qe(a,!1),this.leafNodes=qe(a,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,s){const a=s?s.appendChild(t):new be(t,this.config);s||this.nodes.push(a),this.allNodes.push(a),a.isLeaf&&this.leafNodes.push(a)}appendNodes(t,s){t.forEach(a=>this.appendNode(a,s))}getNodeByValue(t,s=!1){return!t&&t!==0?null:this.getFlattedNodes(s).find(r=>Ce(r.value,t)||Ce(r.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:a,level:r})=>Ce(t.value,a)&&t.level===r)||null}}const Na=Re({modelValue:{type:ie([Number,String,Array])},options:{type:ie(Array),default:()=>[]},props:{type:ie(Object),default:()=>({})}}),Dl={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:za,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Ml=e=>g(()=>({...Dl,...e.props})),da=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},Ll=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():Xa(e)&&e.click()},Fl=(e,t)=>{const s=t.slice(0),a=s.map(v=>v.uid),r=e.reduce((v,p)=>{const k=a.indexOf(p.uid);return k>-1&&(v.push(p),s.splice(k,1),a.splice(k,1)),v},[]);return r.push(...s),r},Hl=ue({name:"ElCascaderPanel",components:{ElCascaderMenu:Il},props:{...Na,border:{type:Boolean,default:!0},renderLabel:Function},emits:[re,Ne,"close","expand-change"],setup(e,{emit:t,slots:s}){let a=!1;const r=pe("cascader"),v=Ml(e);let p=null;const k=P(!0),u=P([]),w=P(null),E=P([]),y=P(null),F=P([]),_=g(()=>v.value.expandTrigger==="hover"),q=g(()=>e.renderLabel||s.default),H=()=>{const{options:d}=e,h=v.value;a=!1,p=new ca(d,h),E.value=[p.getNodes()],h.lazy&&Oe(e.options)?(k.value=!1,I(void 0,C=>{C&&(p=new ca(C,h),E.value=[p.getNodes()]),k.value=!0,z(!1,!0)})):z(!1,!0)},I=(d,h)=>{const C=v.value;d=d||new be({},C,void 0,!0),d.loading=!0;const S=n=>{const f=d,b=f.root?null:f;n&&(p==null||p.appendNodes(n,b)),f.loading=!1,f.loaded=!0,f.childrenData=f.childrenData||[],h&&h(n)};C.lazyLoad(d,S)},R=(d,h)=>{var C;const{level:S}=d,n=E.value.slice(0,S);let f;d.isLeaf?f=d.pathNodes[S-2]:(f=d,n.push(d.children)),((C=y.value)==null?void 0:C.uid)!==(f==null?void 0:f.uid)&&(y.value=d,E.value=n,!h&&t("expand-change",(d==null?void 0:d.pathValues)||[]))},M=(d,h,C=!0)=>{const{checkStrictly:S,multiple:n}=v.value,f=F.value[0];a=!0,!n&&(f==null||f.doCheck(!1)),d.doCheck(h),L(),C&&!n&&!S&&t("close"),!C&&!n&&!S&&j(d)},j=d=>{d&&(d=d.parent,j(d),d&&R(d))},K=d=>p==null?void 0:p.getFlattedNodes(d),W=d=>{var h;return(h=K(d))==null?void 0:h.filter(C=>C.checked!==!1)},N=()=>{F.value.forEach(d=>d.doCheck(!1)),L(),E.value=E.value.slice(0,1),y.value=null,t("expand-change",[])},L=()=>{var d;const{checkStrictly:h,multiple:C}=v.value,S=F.value,n=W(!h),f=Fl(S,n),b=f.map(V=>V.valueByOption);F.value=f,w.value=C?b:(d=b[0])!=null?d:null},z=(d=!1,h=!1)=>{const{modelValue:C}=e,{lazy:S,multiple:n,checkStrictly:f}=v.value,b=!f;if(!(!k.value||a||!h&&Ce(C,w.value)))if(S&&!d){const Z=ra(kl(ua(C))).map($=>p==null?void 0:p.getNodeByValue($)).filter($=>!!$&&!$.loaded&&!$.loading);Z.length?Z.forEach($=>{I($,()=>z(!1,h))}):z(!0,h)}else{const V=n?ua(C):[C],Z=ra(V.map($=>p==null?void 0:p.getNodeByValue($,b)));Q(Z,h),w.value=va(C)}},Q=(d,h=!0)=>{const{checkStrictly:C}=v.value,S=F.value,n=d.filter(V=>!!V&&(C||V.isLeaf)),f=p==null?void 0:p.getSameNode(y.value),b=h&&f||n[0];b?b.pathNodes.forEach(V=>R(V,!0)):y.value=null,S.forEach(V=>V.doCheck(!1)),e.props.multiple?Ge(n).forEach(V=>V.doCheck(!0)):n.forEach(V=>V.doCheck(!0)),F.value=n,ce(ee)},ee=()=>{ha&&u.value.forEach(d=>{const h=d==null?void 0:d.$el;if(h){const C=h.querySelector(`.${r.namespace.value}-scrollbar__wrap`),S=h.querySelector(`.${r.b("node")}.${r.is("active")}`)||h.querySelector(`.${r.b("node")}.in-active-path`);fl(C,S)}})},ae=d=>{const h=d.target,{code:C}=d;switch(C){case O.up:case O.down:{d.preventDefault();const S=C===O.up?-1:1;Te(ma(h,S,`.${r.b("node")}[tabindex="-1"]`));break}case O.left:{d.preventDefault();const S=u.value[da(h)-1],n=S==null?void 0:S.$el.querySelector(`.${r.b("node")}[aria-expanded="true"]`);Te(n);break}case O.right:{d.preventDefault();const S=u.value[da(h)+1],n=S==null?void 0:S.$el.querySelector(`.${r.b("node")}[tabindex="-1"]`);Te(n);break}case O.enter:Ll(h);break}};return Aa(We,Ge({config:v,expandingNode:y,checkedNodes:F,isHoverMenu:_,initialLoaded:k,renderLabelFn:q,lazyLoad:I,expandNode:R,handleCheckChange:M})),se([v,()=>e.options],H,{deep:!0,immediate:!0}),se(()=>e.modelValue,()=>{a=!1,z()},{deep:!0}),se(()=>w.value,d=>{Ce(d,e.modelValue)||(t(re,d),t(Ne,d))}),Ka(()=>u.value=[]),pa(()=>!Oe(e.modelValue)&&z()),{ns:r,menuList:u,menus:E,checkedNodes:F,handleKeyDown:ae,handleCheckChange:M,getFlattedNodes:K,getCheckedNodes:W,clearCheckedNodes:N,calculateCheckedValue:L,scrollToExpandingNode:ee}}});function Bl(e,t,s,a,r,v){const p=Y("el-cascader-menu");return m(),D("div",{class:x([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:t[0]||(t[0]=(...k)=>e.handleKeyDown&&e.handleKeyDown(...k))},[(m(!0),D(ne,null,ge(e.menus,(k,u)=>(m(),B(p,{key:u,ref_for:!0,ref:w=>e.menuList[u]=w,index:u,nodes:[...k]},null,8,["index","nodes"]))),128))],34)}var xe=we(Hl,[["render",Bl],["__file","index.vue"]]);xe.install=e=>{e.component(xe.name,xe)};const zl=xe,Al=Re({...Na,size:ga,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:ie(Function),default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:ie(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:Ja.teleported,tagType:{...pl.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),Kl={[re]:e=>!!e||e===null,[Ne]:e=>!!e||e===null,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,visibleChange:e=>Ya(e),expandChange:e=>!!e,removeTag:e=>!!e},Ol={key:0},ql=["placeholder","onKeydown"],Rl=["onClick"],Wl="ElCascader",Ul=ue({name:Wl}),jl=ue({...Ul,props:Al,emits:Kl,setup(e,{expose:t,emit:s}){const a=e,r={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:l})=>{const{modifiersData:o,placement:c}=l;["right","left","bottom","top"].includes(c)||(o.arrow.x=35)},requires:["arrow"]}]},v=Oa();let p=0,k=0;const u=pe("cascader"),w=pe("input"),{t:E}=fa(),{form:y,formItem:F}=gl(),_=P(null),q=P(null),H=P(null),I=P(null),R=P(null),M=P(!1),j=P(!1),K=P(!1),W=P(!1),N=P(""),L=P(""),z=P([]),Q=P([]),ee=P([]),ae=P(!1),d=g(()=>v.style),h=g(()=>a.disabled||(y==null?void 0:y.disabled)),C=g(()=>a.placeholder||E("el.cascader.placeholder")),S=g(()=>L.value||z.value.length>0||ae.value?"":C.value),n=Ca(),f=g(()=>["small"].includes(n.value)?"small":"default"),b=g(()=>!!a.props.multiple),V=g(()=>!a.filterable||b.value),Z=g(()=>b.value?L.value:N.value),$=g(()=>{var l;return((l=I.value)==null?void 0:l.checkedNodes)||[]}),fe=g(()=>!a.clearable||h.value||K.value||!j.value?!1:!!$.value.length),Ee=g(()=>{const{showAllLevels:l,separator:o}=a,c=$.value;return c.length?b.value?"":c[0].calcText(l,o):""}),De=g({get(){return va(a.modelValue)},set(l){s(re,l),s(Ne,l),a.validateEvent&&(F==null||F.validate("change").catch(o=>Ga()))}}),wa=g(()=>[u.b(),u.m(n.value),u.is("disabled",h.value),v.class]),Ea=g(()=>[w.e("icon"),"icon-arrow-down",u.is("reverse",M.value)]),Va=g(()=>u.is("focus",M.value||W.value)),Ue=g(()=>{var l,o;return(o=(l=_.value)==null?void 0:l.popperRef)==null?void 0:o.contentRef}),X=l=>{var o,c,T;h.value||(l=l??!M.value,l!==M.value&&(M.value=l,(c=(o=q.value)==null?void 0:o.input)==null||c.setAttribute("aria-expanded",`${l}`),l?(ye(),ce((T=I.value)==null?void 0:T.scrollToExpandingNode)):a.filterable&&Be(),s("visibleChange",l)))},ye=()=>{ce(()=>{var l;(l=_.value)==null||l.updatePopper()})},Me=()=>{K.value=!1},Le=l=>{const{showAllLevels:o,separator:c}=a;return{node:l,key:l.uid,text:l.calcText(o,c),hitState:!1,closable:!h.value&&!l.isDisabled,isCollapseTag:!1}},Fe=l=>{var o;const c=l.node;c.doCheck(!1),(o=I.value)==null||o.calculateCheckedValue(),s("removeTag",c.valueByOption)},Sa=()=>{if(!b.value)return;const l=$.value,o=[],c=[];if(l.forEach(T=>c.push(Le(T))),Q.value=c,l.length){l.slice(0,a.maxCollapseTags).forEach(G=>o.push(Le(G)));const T=l.slice(a.maxCollapseTags),le=T.length;le&&(a.collapseTags?o.push({key:-1,text:`+ ${le}`,closable:!1,isCollapseTag:!0}):T.forEach(G=>o.push(Le(G))))}z.value=o},je=()=>{var l,o;const{filterMethod:c,showAllLevels:T,separator:le}=a,G=(o=(l=I.value)==null?void 0:l.getFlattedNodes(!a.props.checkStrictly))==null?void 0:o.filter(te=>te.isDisabled?!1:(te.calcText(T,le),c(te,Z.value)));b.value&&(z.value.forEach(te=>{te.hitState=!1}),Q.value.forEach(te=>{te.hitState=!1})),K.value=!0,ee.value=G,ye()},$a=()=>{var l;let o;K.value&&R.value?o=R.value.$el.querySelector(`.${u.e("suggestion-item")}`):o=(l=I.value)==null?void 0:l.$el.querySelector(`.${u.b("node")}[tabindex="-1"]`),o&&(o.focus(),!K.value&&o.click())},He=()=>{var l,o;const c=(l=q.value)==null?void 0:l.input,T=H.value,le=(o=R.value)==null?void 0:o.$el;if(!(!ha||!c)){if(le){const G=le.querySelector(`.${u.e("suggestion-list")}`);G.style.minWidth=`${c.offsetWidth}px`}if(T){const{offsetHeight:G}=T,te=z.value.length>0?`${Math.max(G+6,p)}px`:`${p}px`;c.style.height=te,ye()}}},Ta=l=>{var o;return(o=I.value)==null?void 0:o.getCheckedNodes(l)},xa=l=>{ye(),s("expandChange",l)},ve=l=>{var o;const c=(o=l.target)==null?void 0:o.value;if(l.type==="compositionend")ae.value=!1,ce(()=>ze(c));else{const T=c[c.length-1]||"";ae.value=!ml(T)}},Ia=l=>{if(!ae.value)switch(l.code){case O.enter:X();break;case O.down:X(!0),ce($a),l.preventDefault();break;case O.esc:M.value===!0&&(l.preventDefault(),l.stopPropagation(),X(!1));break;case O.tab:X(!1);break}},Pa=()=>{var l;(l=I.value)==null||l.clearCheckedNodes(),!M.value&&a.filterable&&Be(),X(!1)},Be=()=>{const{value:l}=Ee;N.value=l,L.value=l},_a=l=>{var o,c;const{checked:T}=l;b.value?(o=I.value)==null||o.handleCheckChange(l,!T,!1):(!T&&((c=I.value)==null||c.handleCheckChange(l,!0,!1)),X(!1))},Da=l=>{const o=l.target,{code:c}=l;switch(c){case O.up:case O.down:{const T=c===O.up?-1:1;Te(ma(o,T,`.${u.e("suggestion-item")}[tabindex="-1"]`));break}case O.enter:o.click();break}},Ma=()=>{const l=z.value,o=l[l.length-1];k=L.value?0:k+1,!(!o||!k||a.collapseTags&&l.length>1)&&(o.hitState?Fe(o):o.hitState=!0)},Ze=l=>{const o=l.target,c=u.e("search-input");o.className===c&&(W.value=!0),s("focus",l)},Xe=l=>{W.value=!1,s("blur",l)},La=Qa(()=>{const{value:l}=Z;if(!l)return;const o=a.beforeFilter(l);qa(o)?o.then(je).catch(()=>{}):o!==!1?je():Me()},a.debounce),ze=(l,o)=>{!M.value&&X(!0),!(o!=null&&o.isComposing)&&(l?La():Me())},Je=l=>Number.parseFloat(ll(w.cssVarName("input-height"),l).value)-2;return se(K,ye),se([$,h],Sa),se(z,()=>{ce(()=>He())}),se(n,async()=>{await ce();const l=q.value.input;p=Je(l)||p,He()}),se(Ee,Be,{immediate:!0}),pa(()=>{const l=q.value.input,o=Je(l);p=l.offsetHeight||o,el(l,He)}),t({getCheckedNodes:Ta,cascaderPanelRef:I,togglePopperVisible:X,contentRef:Ue}),(l,o)=>(m(),B(i(aa),{ref_key:"tooltipRef",ref:_,visible:M.value,teleported:l.teleported,"popper-class":[i(u).e("dropdown"),l.popperClass],"popper-options":r,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${i(u).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:Me},{default:A(()=>[me((m(),D("div",{class:x(i(wa)),style:$e(i(d)),onClick:o[5]||(o[5]=()=>X(i(V)?void 0:!0)),onKeydown:Ia,onMouseenter:o[6]||(o[6]=c=>j.value=!0),onMouseleave:o[7]||(o[7]=c=>j.value=!1)},[J(i(hl),{ref_key:"input",ref:q,modelValue:N.value,"onUpdate:modelValue":o[1]||(o[1]=c=>N.value=c),placeholder:i(S),readonly:i(V),disabled:i(h),"validate-event":!1,size:i(n),class:x(i(Va)),tabindex:i(b)&&l.filterable&&!i(h)?-1:void 0,onCompositionstart:ve,onCompositionupdate:ve,onCompositionend:ve,onFocus:Ze,onBlur:Xe,onInput:ze},{suffix:A(()=>[i(fe)?(m(),B(i(de),{key:"clear",class:x([i(w).e("icon"),"icon-circle-close"]),onClick:ke(Pa,["stop"])},{default:A(()=>[J(i(il))]),_:1},8,["class","onClick"])):(m(),B(i(de),{key:"arrow-down",class:x(i(Ea)),onClick:o[0]||(o[0]=ke(c=>X(),["stop"]))},{default:A(()=>[J(i(rl))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),i(b)?(m(),D("div",{key:0,ref_key:"tagWrapper",ref:H,class:x(i(u).e("tags"))},[(m(!0),D(ne,null,ge(z.value,c=>(m(),B(i(ia),{key:c.key,type:l.tagType,size:i(f),hit:c.hitState,closable:c.closable,"disable-transitions":"",onClose:T=>Fe(c)},{default:A(()=>[c.isCollapseTag===!1?(m(),D("span",Ol,oe(c.text),1)):(m(),B(i(aa),{key:1,disabled:M.value||!l.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:A(()=>[he("span",null,oe(c.text),1)]),content:A(()=>[he("div",{class:x(i(u).e("collapse-tags"))},[(m(!0),D(ne,null,ge(Q.value.slice(l.maxCollapseTags),(T,le)=>(m(),D("div",{key:le,class:x(i(u).e("collapse-tag"))},[(m(),B(i(ia),{key:T.key,class:"in-tooltip",type:l.tagType,size:i(f),hit:T.hitState,closable:T.closable,"disable-transitions":"",onClose:G=>Fe(T)},{default:A(()=>[he("span",null,oe(T.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),l.filterable&&!i(h)?me((m(),D("input",{key:0,"onUpdate:modelValue":o[2]||(o[2]=c=>L.value=c),type:"text",class:x(i(u).e("search-input")),placeholder:i(Ee)?"":i(C),onInput:o[3]||(o[3]=c=>ze(L.value,c)),onClick:o[4]||(o[4]=ke(c=>X(!0),["stop"])),onKeydown:Ra(Ma,["delete"]),onCompositionstart:ve,onCompositionupdate:ve,onCompositionend:ve,onFocus:Ze,onBlur:Xe},null,42,ql)),[[Wa,L.value]]):U("v-if",!0)],2)):U("v-if",!0)],38)),[[i(al),()=>X(!1),i(Ue)]])]),content:A(()=>[me(J(i(zl),{ref_key:"cascaderPanelRef",ref:I,modelValue:i(De),"onUpdate:modelValue":o[8]||(o[8]=c=>Ua(De)?De.value=c:null),options:l.options,props:a.props,border:!1,"render-label":l.$slots.default,onExpandChange:xa,onClose:o[9]||(o[9]=c=>l.$nextTick(()=>X(!1)))},null,8,["modelValue","options","props","render-label"]),[[_e,!K.value]]),l.filterable?me((m(),B(i(ba),{key:0,ref_key:"suggestionPanel",ref:R,tag:"ul",class:x(i(u).e("suggestion-panel")),"view-class":i(u).e("suggestion-list"),onKeydown:Da},{default:A(()=>[ee.value.length?(m(!0),D(ne,{key:0},ge(ee.value,c=>(m(),D("li",{key:c.uid,class:x([i(u).e("suggestion-item"),i(u).is("checked",c.checked)]),tabindex:-1,onClick:T=>_a(c)},[he("span",null,oe(c.text),1),c.checked?(m(),B(i(de),{key:0},{default:A(()=>[J(i(ya))]),_:1})):U("v-if",!0)],10,Rl))),128)):ja(l.$slots,"empty",{key:1},()=>[he("li",{class:x(i(u).e("empty-text"))},oe(i(E)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[_e,K.value]]):U("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Ie=we(jl,[["__file","cascader.vue"]]);Ie.install=e=>{e.component(Ie.name,Ie)};const Zl=Ie,mt=Zl,Xl=Re({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:ie([Array,Object]),default:()=>la(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:ie([Array,Object]),default:()=>[Se,Se,Se]},voidIcon:{type:ta,default:()=>ul},disabledVoidIcon:{type:ta,default:()=>Se},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:ie(Array),default:()=>la(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:ga,label:{type:String,default:void 0},clearable:{type:Boolean,default:!1}}),Jl={[Ne]:e=>sa(e),[re]:e=>sa(e)},Yl=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],Gl=["onMousemove","onClick"],Ql=ue({name:"ElRate"}),et=ue({...Ql,props:Xl,emits:Jl,setup(e,{expose:t,emit:s}){const a=e;function r(n,f){const b=$=>Qe($),V=Object.keys(f).map($=>+$).filter($=>{const fe=f[$];return(b(fe)?fe.excluded:!1)?n<$:n<=$}).sort(($,fe)=>$-fe),Z=f[V[0]];return b(Z)&&Z.value||Z}const v=Pe(tl,void 0),p=Pe(sl,void 0),k=Ca(),u=pe("rate"),{inputId:w,isLabeledByFormItem:E}=bl(a,{formItemContext:p}),y=P(a.modelValue),F=P(-1),_=P(!0),q=g(()=>[u.b(),u.m(k.value)]),H=g(()=>a.disabled||(v==null?void 0:v.disabled)),I=g(()=>u.cssVarBlock({"void-color":a.voidColor,"disabled-void-color":a.disabledVoidColor,"fill-color":K.value})),R=g(()=>{let n="";return a.showScore?n=a.scoreTemplate.replace(/\{\s*value\s*\}/,H.value?`${a.modelValue}`:`${y.value}`):a.showText&&(n=a.texts[Math.ceil(y.value)-1]),n}),M=g(()=>a.modelValue*100-Math.floor(a.modelValue)*100),j=g(()=>Ae(a.colors)?{[a.lowThreshold]:a.colors[0],[a.highThreshold]:{value:a.colors[1],excluded:!0},[a.max]:a.colors[2]}:a.colors),K=g(()=>{const n=r(y.value,j.value);return Qe(n)?"":n}),W=g(()=>{let n="";return H.value?n=`${M.value}%`:a.allowHalf&&(n="50%"),{color:K.value,width:n}}),N=g(()=>{let n=Ae(a.icons)?[...a.icons]:{...a.icons};return n=Ke(n),Ae(n)?{[a.lowThreshold]:n[0],[a.highThreshold]:{value:n[1],excluded:!0},[a.max]:n[2]}:n}),L=g(()=>r(a.modelValue,N.value)),z=g(()=>H.value?ea(a.disabledVoidIcon)?a.disabledVoidIcon:Ke(a.disabledVoidIcon):ea(a.voidIcon)?a.voidIcon:Ke(a.voidIcon)),Q=g(()=>r(y.value,N.value));function ee(n){const f=H.value&&M.value>0&&n-1<a.modelValue&&n>a.modelValue,b=a.allowHalf&&_.value&&n-.5<=y.value&&n>y.value;return f||b}function ae(n){a.clearable&&n===a.modelValue&&(n=0),s(re,n),a.modelValue!==n&&s("change",n)}function d(n){H.value||(a.allowHalf&&_.value?ae(y.value):ae(n))}function h(n){if(H.value)return;let f=y.value;const b=n.code;return b===O.up||b===O.right?(a.allowHalf?f+=.5:f+=1,n.stopPropagation(),n.preventDefault()):(b===O.left||b===O.down)&&(a.allowHalf?f-=.5:f-=1,n.stopPropagation(),n.preventDefault()),f=f<0?0:f,f=f>a.max?a.max:f,s(re,f),s("change",f),f}function C(n,f){if(!H.value){if(a.allowHalf&&f){let b=f.target;na(b,u.e("item"))&&(b=b.querySelector(`.${u.e("icon")}`)),(b.clientWidth===0||na(b,u.e("decimal")))&&(b=b.parentNode),_.value=f.offsetX*2<=b.clientWidth,y.value=_.value?n-.5:n}else y.value=n;F.value=n}}function S(){H.value||(a.allowHalf&&(_.value=a.modelValue!==Math.floor(a.modelValue)),y.value=a.modelValue,F.value=-1)}return se(()=>a.modelValue,n=>{y.value=n,_.value=a.modelValue!==Math.floor(a.modelValue)}),a.modelValue||s(re,0),t({setCurrentValue:C,resetCurrentValue:S}),(n,f)=>{var b;return m(),D("div",{id:i(w),class:x([i(q),i(u).is("disabled",i(H))]),role:"slider","aria-label":i(E)?void 0:n.label||"rating","aria-labelledby":i(E)?(b=i(p))==null?void 0:b.labelId:void 0,"aria-valuenow":y.value,"aria-valuetext":i(R)||void 0,"aria-valuemin":"0","aria-valuemax":n.max,tabindex:"0",style:$e(i(I)),onKeydown:h},[(m(!0),D(ne,null,ge(n.max,(V,Z)=>(m(),D("span",{key:Z,class:x(i(u).e("item")),onMousemove:$=>C(V,$),onMouseleave:S,onClick:$=>d(V)},[J(i(de),{class:x([i(u).e("icon"),{hover:F.value===V},i(u).is("active",V<=y.value)])},{default:A(()=>[ee(V)?U("v-if",!0):(m(),D(ne,{key:0},[me((m(),B(Ve(i(Q)),null,null,512)),[[_e,V<=y.value]]),me((m(),B(Ve(i(z)),null,null,512)),[[_e,!(V<=y.value)]])],64)),ee(V)?(m(),D(ne,{key:1},[(m(),B(Ve(i(z)),{class:x([i(u).em("decimal","box")])},null,8,["class"])),J(i(de),{style:$e(i(W)),class:x([i(u).e("icon"),i(u).e("decimal")])},{default:A(()=>[(m(),B(Ve(i(L))))]),_:1},8,["style","class"])],64)):U("v-if",!0)]),_:2},1032,["class"])],42,Gl))),128)),n.showText||n.showScore?(m(),D("span",{key:0,class:x(i(u).e("text")),style:$e({color:n.textColor})},oe(i(R)),7)):U("v-if",!0)],46,Yl)}}});var at=we(et,[["__file","rate.vue"]]);const gt=nl(at);export{mt as E,gt as a,Cl as g};
